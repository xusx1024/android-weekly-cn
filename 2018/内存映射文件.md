# 内存映射文件(Memory-mapped file)
---
[原文地址](https://en.wikipedia.org/wiki/Memory-mapped_file)

[帮助理解的blog](https://blog.csdn.net/mg0832058/article/details/5890688)

>优点

内存映射文件(Memory-mapped file),或成"文件映射","映射文件",是一段虚内存逐字节对应于一个文件或类文件资源(file-like resource),使得应用程序处理映射部分如同访问主内存.

主要用处是增加I/O性能,特别是对于大文件.对于小文件,内存映射文件会导致碎片空间浪费,因为内存映射总是要对齐页边界,这起码是4KB.因此一个5KB的文件将会映射占用8KB内存,浪费了3KB内存.访问内存映射文件比直接文件读写要快几个数量级.

内存映射文件可以只加载一部分内容到用户的逻辑内存空间.这对非常大的文件特别有用.

使用内存映射文件可以避免颠簸:把相当大的文件直接加载到内存时,由于可用内存不足,使得一遍读取文件内存,同时把部分已经加载的文件从内存写入硬盘虚存文件中.

内存映射文件由操作系统的内存管理程序负责,因此绕过了硬盘虚存的分页文件.

---
>缺点

内存映射文件需要在进程占用一块很大的连续逻辑地址空间.

相关联的文件的I/O错误(如可拔出驱动器或光驱被弹出,磁盘满时写操作等),通常的内存操作无需考虑这些异常.

有内存管理单元才支持内存映射文件.
